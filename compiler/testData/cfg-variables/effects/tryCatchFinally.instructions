== myRun ==
inline fun <T> myRun(@CalledInPlace(InvocationCount.EXACTLY_ONCE) block: () -> T): T = block()
---------------------
L0:
  1 <START>                                                                                         INIT: in: {} out: {}
    v(@CalledInPlace(InvocationCount.EXACTLY_ONCE) block: () -> T)                                  INIT: in: {} out: {block=D}
    magic[FAKE_INITIALIZER](@CalledInPlace(InvocationCount.EXACTLY_ONCE) block: () -> T) -> <v0>    INIT: in: {block=D} out: {block=D}
    w(block|<v0>)                                                                                   INIT: in: {block=D} out: {block=ID}     USE: in: {block=READ} out: {block=READ}
    r(block) -> <v1>                                                                                INIT: in: {block=ID} out: {block=ID}    USE: in: {} out: {block=READ}
    mark(block())
    call(block(), invoke|<v1>) -> <v2>
    ret(*|<v2>) L1
L1:
    <END>                                                                                                                                   USE: in: {} out: {}
error:
-   <ERROR>
sink:
    <SINK>                                                                                          INIT: in: {block=ID} out: {block=ID}    USE: in: {} out: {}
=====================
== someComputation ==
fun someComputation(): Int = 42
---------------------
L0:
  1 <START>           INIT: in: {} out: {}
    r(42) -> <v0>
    ret(*|<v0>) L1
L1:
    <END>                                     USE: in: {} out: {}
error:
-   <ERROR>
sink:
    <SINK>            INIT: in: {} out: {}    USE: in: {} out: {}
=====================
== report ==
fun report(x: Int) = Unit
---------------------
L0:
  1 <START>                                    INIT: in: {} out: {}
    v(x: Int)                                  INIT: in: {} out: {x=D}
    magic[FAKE_INITIALIZER](x: Int) -> <v0>    INIT: in: {x=D} out: {x=D}
    w(x|<v0>)                                  INIT: in: {x=D} out: {x=ID}     USE: in: {Unit=READ} out: {Unit=READ}
    r(Unit) -> <v1>                            INIT: in: {x=ID} out: {x=ID}    USE: in: {} out: {Unit=READ}
    ret(*|<v1>) L1
L1:
    <END>                                                                      USE: in: {} out: {}
error:
-   <ERROR>
sink:
    <SINK>                                     INIT: in: {x=ID} out: {x=ID}    USE: in: {} out: {}
=====================
== innerTryCatchFinally ==
fun innerTryCatchFinally() {
    val x: Int

    myRun {
        try {
            x = someComputation()
            report(x)
        } catch (e: java.lang.Exception) {
            x = 42
            report(x)
        } finally {
            x = 0
        }
    }

    x.inc()
}
---------------------
L0:
  1 <START>                                                                                                                                                 INIT: in: {} out: {}            USE: in: {} out: {}
  2 mark({ val x: Int myRun { try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 } } x.inc() })
    v(val x: Int)                                                                                                                                           INIT: in: {} out: {x=D}
    mark({ try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 } })                                 INIT: in: {x=D} out: {x=D}
    r({ try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 } }) -> <v0>
    mark(myRun { try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 } })
    call(myRun { try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 } }, myRun|<v0>) -> <v1>
L2 [before inlined declaration]:
    inlined({ try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 } })                              INIT: in: {x=ID} out: {x=ID}    USE: in: {x=WRITTEN_AFTER_READ} out: {x=WRITTEN_AFTER_READ}
L3 [after inlined declaration]:
    mark(x.inc())                                                                                                                                                                           USE: in: {x=READ} out: {x=READ}
    r(x) -> <v2>                                                                                                                                                                            USE: in: {} out: {x=READ}
    mark(inc())
    call(inc(), inc|<v2>) -> <v3>
L1:
  1 <END>                                                                                                                                                   INIT: in: {} out: {}            USE: in: {} out: {}
error:
-   <ERROR>
sink:
    <SINK>                                                                                                                                                  INIT: in: {} out: {}            USE: in: {} out: {}
=====================
== anonymous_0 ==
{
        try {
            x = someComputation()
            report(x)
        } catch (e: java.lang.Exception) {
            x = 42
            report(x)
        } finally {
            x = 0
        }
    }
---------------------
L4:
  3 <START>                                                                                                                                    INIT: in: {x=D} out: {x=D}
  4 mark(try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 })
    mark(try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 })
    jmp?(L6)
    jmp?(L7)
  5 mark({ x = someComputation() report(x) })
    mark(someComputation())
    call(someComputation(), someComputation) -> <v0>                                                                                                                                         USE: in: {x=WRITTEN_AFTER_READ} out: {x=WRITTEN_AFTER_READ}
    w(x|<v0>)                                                                                                                                  INIT: in: {x=D} out: {x=ID}                   USE: in: {x=READ} out: {x=WRITTEN_AFTER_READ}
    r(x) -> <v1>                                                                                                                               INIT: in: {x=ID} out: {x=ID}                  USE: in: {x=WRITTEN_AFTER_READ} out: {x=READ}
    mark(report(x))
    call(report(x), report|<v1>) -> <v2>
  4 jmp?(L6)
    jmp?(L7)
    jmp(L8)
L6 [onException]:
  5 v(e: java.lang.Exception)                                                                                                                  INIT: in: {x=I?D} out: {e=D, x=I?D}
    magic[FAKE_INITIALIZER](e: java.lang.Exception) -> <v3>                                                                                    INIT: in: {e=D, x=I?D} out: {e=D, x=I?D}
    w(e|<v3>)                                                                                                                                  INIT: in: {e=D, x=I?D} out: {e=ID, x=I?D}
  6 mark({ x = 42 report(x) })                                                                                                                 INIT: in: {e=ID, x=I?D} out: {e=ID, x=I?D}
    r(42) -> <v4>                                                                                                                                                                            USE: in: {x=WRITTEN_AFTER_READ} out: {x=WRITTEN_AFTER_READ}
    w(x|<v4>)                                                                                                                                  INIT: in: {e=ID, x=I?D} out: {e=ID, x=ID}     USE: in: {x=READ} out: {x=WRITTEN_AFTER_READ}
    r(x) -> <v5>                                                                                                                               INIT: in: {e=ID, x=ID} out: {e=ID, x=ID}      USE: in: {x=WRITTEN_AFTER_READ} out: {x=READ}
    mark(report(x))
    call(report(x), report|<v5>) -> <v6>
  5 jmp(L8)
L8 [afterCatches]:
  4 jmp(L9)                                                                                                                                    INIT: in: {x=ID} out: {x=ID}
L7 [onExceptionToFinallyBlock]:
L10 [start finally]:
  5 mark({ x = 0 })                                                                                                                            INIT: in: {x=I?D} out: {x=I?D}
    r(0) -> <v7>                                                                                                                                                                             USE: in: {x=WRITTEN_AFTER_READ} out: {x=WRITTEN_AFTER_READ}
    w(x|<v7>)                                                                                                                                  INIT: in: {x=I?D} out: {x=ID}                 USE: in: {x=READ} out: {x=WRITTEN_AFTER_READ}
L11 [finish finally]:
  4 jmp(error)                                                                                                                                 INIT: in: {x=ID} out: {x=ID}                  USE: in: {x=READ} out: {x=READ}
L9 [skipFinallyToErrorBlock]:
L12 [copy of L7, onExceptionToFinallyBlock]:
  5 mark({ x = 0 })
    r(0) -> <v7>                                                                                                                                                                             USE: in: {x=WRITTEN_AFTER_READ} out: {x=WRITTEN_AFTER_READ}
    w(x|<v7>)                                                                                                                                                                                USE: in: {x=READ} out: {x=WRITTEN_AFTER_READ}
  4 merge(try { x = someComputation() report(x) } catch (e: java.lang.Exception) { x = 42 report(x) } finally { x = 0 }|<v2>, <v6>) -> <v9>
L5:
  3 <END>
error:
    <ERROR>
sink:
    <SINK>                                                                                                                                                                                   USE: in: {x=READ} out: {x=READ}
=====================
