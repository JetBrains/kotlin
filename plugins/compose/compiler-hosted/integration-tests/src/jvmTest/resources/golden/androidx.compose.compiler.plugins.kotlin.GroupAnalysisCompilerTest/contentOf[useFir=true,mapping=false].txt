//
// Source
// ------------------------------------------

private fun contentOf(
    loading: @Composable ((State.Loading) -> Unit)?,
    success: @Composable ((State.Success) -> Unit)?,
    error: @Composable ((State.Error) -> Unit)?,
): @Composable () -> Unit {
    return if (loading != null || success != null || error != null) {
        {
            var draw = true
            when (val state = getState()) {
                is State.Loading -> if (loading != null) loading(state).also { draw = false }
                is State.Success -> if (success != null) success(state).also { draw = false }
                is State.Error -> if (error != null) error(state).also { draw = false }
                is State.Empty -> {} // Skipped if rendering on the main thread.
            }
            if (draw) SubcomposeAsyncImageContent()
        }
    } else {
        { SubcomposeAsyncImageContent() }
    }
}

//
// Transformed IR
// ------------------------------------------

========= FunctionMeta: true, OptimizeGroups: true =========
ComposableSingletons$TestKt {
    file: Test.kt
    lambda_412467906$lambda$0(Landroidx/compose/runtime/Composer;I)Lkotlin/Unit;
        Root { key: 412467906, line: 21 }
}

TestKt {
    file: Test.kt
    contentOf$lambda$0(Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Landroidx/compose/runtime/Composer;I)Lkotlin/Unit;
        ReplaceGroup { key: -721096242, line: 13 }
        ReplaceGroup { key: -879126839, line: 13 }
        ReplaceGroup { key: -721093234, line: 14 }
        ReplaceGroup { key: -879033591, line: 14 }
        ReplaceGroup { key: -721090418, line: 15 }
        ReplaceGroup { key: -878946295, line: 15 }
        ReplaceGroup { key: -721085962, line: 18 }
        ReplaceGroup { key: -878800471, line: 18 }
        Root { key: 1366845881, line: 11 }
}

========= FunctionMeta: false, OptimizeGroups: true =========
TestKt {
    file: Test.kt
    contentOf$lambda$0(Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Landroidx/compose/runtime/Composer;I)Lkotlin/Unit;
        ReplaceGroup { key: -721096242, line: 13 }
        ReplaceGroup { key: -879126839, line: 13 }
        ReplaceGroup { key: -721093234, line: 14 }
        ReplaceGroup { key: -879033591, line: 14 }
        ReplaceGroup { key: -721090418, line: 15 }
        ReplaceGroup { key: -878946295, line: 15 }
        ReplaceGroup { key: -721085962, line: 18 }
        ReplaceGroup { key: -878800471, line: 18 }
}

========= FunctionMeta: true, OptimizeGroups: false =========
ComposableSingletons$TestKt {
    file: Test.kt
    lambda_412467906$lambda$0(Landroidx/compose/runtime/Composer;I)Lkotlin/Unit;
        Root { key: 412467906, line: 21 }
}

TestKt {
    file: Test.kt
    contentOf$lambda$0(Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Landroidx/compose/runtime/Composer;I)Lkotlin/Unit;
        ReplaceGroup { key: -879181616, line: 13 }
        ReplaceGroup { key: -879088368, line: 14 }
        ReplaceGroup { key: -878997228, line: 15 }
        ReplaceGroup { key: -878911513, line: 16 }
        ReplaceGroup { key: -721099189, line: 12 }
        Root { key: 1366845881, line: 11 }
}

========= FunctionMeta: false, OptimizeGroups: false =========
TestKt {
    file: Test.kt
    contentOf$lambda$0(Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Lkotlin/jvm/functions/Function3;Landroidx/compose/runtime/Composer;I)Lkotlin/Unit;
        ReplaceGroup { key: -879181616, line: 13 }
        ReplaceGroup { key: -879088368, line: 14 }
        ReplaceGroup { key: -878997228, line: 15 }
        ReplaceGroup { key: -878911513, line: 16 }
        ReplaceGroup { key: -721099189, line: 12 }
}
