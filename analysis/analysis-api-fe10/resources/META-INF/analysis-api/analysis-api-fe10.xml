<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
  <xi:include href="/META-INF/analysis-api/analysis-api-impl-base.xml"/>

  <extensionPoints>
    <extensionPoint
        qualifiedName="org.jetbrains.kotlin.declarationAttributeAltererExtension"
        interface="org.jetbrains.kotlin.extensions.DeclarationAttributeAltererExtension"
        area="IDEA_PROJECT"
    />

    <extensionPoint
        qualifiedName="org.jetbrains.kotlin.syntheticScopeProviderExtension"
        interface="org.jetbrains.kotlin.synthetic.SyntheticScopeProviderExtension"
        area="IDEA_PROJECT"
    />
  </extensionPoints>

  <extensions defaultExtensionNs="com.intellij">
    <!-- legacy JS decompiler for .kjsm files, not supported in K2 -->
    <psi.classFileDecompiler implementation="org.jetbrains.kotlin.analysis.decompiler.js.KotlinJavaScriptMetaFileDecompiler"/>

    <projectService
        serviceInterface="org.jetbrains.kotlin.analysis.api.session.KaSessionProvider"
        serviceImplementation="org.jetbrains.kotlin.analysis.api.descriptors.KaFe10SessionProvider"
    />

    <projectService
        serviceInterface="org.jetbrains.kotlin.analysis.api.platform.modification.KaSourceModificationService"
        serviceImplementation="org.jetbrains.kotlin.analysis.api.descriptors.modification.KaFe10SourceModificationService"
    />


    <projectService
        serviceInterface="org.jetbrains.kotlin.idea.references.ReadWriteAccessChecker"
        serviceImplementation="org.jetbrains.kotlin.analysis.api.descriptors.references.ReadWriteAccessCheckerDescriptorsImpl"
    />
  </extensions>

  <extensions defaultExtensionNs="org.jetbrains.kotlin">
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10ForLoopInReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10InvokeFunctionReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10PropertyDelegationMethodsReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10DestructuringDeclarationEntry$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10ArrayAccessReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10ConstructorDelegationReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10CollectionLiteralReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.Fe10KDocReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.KtFe10SimpleNameReference$Provider"/>
    <psiReferenceProvider implementation="org.jetbrains.kotlin.references.fe10.Fe10SyntheticPropertyAccessorReference$Provider"/>
  </extensions>
</idea-plugin>
