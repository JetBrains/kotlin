//
// Source
// ------------------------------------------

private fun contentOf(
    loading: @Composable ((State.Loading) -> Unit)?,
    success: @Composable ((State.Success) -> Unit)?,
    error: @Composable ((State.Error) -> Unit)?,
): @Composable () -> Unit {
    return if (loading != null || success != null || error != null) {
        {
            var draw = true
            when (val state = getState()) {
                is State.Loading -> if (loading != null) loading(state).also { draw = false }
                is State.Success -> if (success != null) success(state).also { draw = false }
                is State.Error -> if (error != null) error(state).also { draw = false }
                is State.Empty -> {} // Skipped if rendering on the main thread.
            }
            if (draw) SubcomposeAsyncImageContent()
        }
    } else {
        { SubcomposeAsyncImageContent() }
    }
}

//
// Transformed IR
// ------------------------------------------

========= FunctionMeta: true, OptimizeGroups: true =========
ComposableSingletons$TestKt$lambda$-1311044554$1 {
    file: Test.kt
    invoke(Landroidx/compose/runtime/Composer;I)V
        Root { key: -1311044554, line: 21 }
}

TestKt$contentOf$1 {
    file: Test.kt
    invoke(Landroidx/compose/runtime/Composer;I)V
        ReplaceGroup { key: 870084930, line: 13 }
        ReplaceGroup { key: 1202849237, line: 13 }
        ReplaceGroup { key: 870087938, line: 14 }
        ReplaceGroup { key: 1202942485, line: 14 }
        ReplaceGroup { key: 870090754, line: 15 }
        ReplaceGroup { key: 1203029781, line: 15 }
        ReplaceGroup { key: 870095210, line: 18 }
        ReplaceGroup { key: 1203175605, line: 18 }
        Root { key: -1018087891, line: 11 }
}

========= FunctionMeta: false, OptimizeGroups: true =========
TestKt$contentOf$1 {
    file: Test.kt
    invoke(Landroidx/compose/runtime/Composer;I)V
        ReplaceGroup { key: 870084930, line: 13 }
        ReplaceGroup { key: 1202849237, line: 13 }
        ReplaceGroup { key: 870087938, line: 14 }
        ReplaceGroup { key: 1202942485, line: 14 }
        ReplaceGroup { key: 870090754, line: 15 }
        ReplaceGroup { key: 1203029781, line: 15 }
        ReplaceGroup { key: 870095210, line: 18 }
        ReplaceGroup { key: 1203175605, line: 18 }
}

========= FunctionMeta: true, OptimizeGroups: false =========
ComposableSingletons$TestKt$lambda$-1311044554$1 {
    file: Test.kt
    invoke(Landroidx/compose/runtime/Composer;I)V
        Root { key: -1311044554, line: 21 }
}

TestKt$contentOf$1 {
    file: Test.kt
    invoke(Landroidx/compose/runtime/Composer;I)V
        ReplaceGroup { key: 1202794460, line: 13 }
        ReplaceGroup { key: 1202887708, line: 14 }
        ReplaceGroup { key: 1202978848, line: 15 }
        ReplaceGroup { key: 1203064563, line: 16 }
        ReplaceGroup { key: 1203124021, line: 17 }
        Root { key: -1018087891, line: 11 }
}

========= FunctionMeta: false, OptimizeGroups: false =========
TestKt$contentOf$1 {
    file: Test.kt
    invoke(Landroidx/compose/runtime/Composer;I)V
        ReplaceGroup { key: 1202794460, line: 13 }
        ReplaceGroup { key: 1202887708, line: 14 }
        ReplaceGroup { key: 1202978848, line: 15 }
        ReplaceGroup { key: 1203064563, line: 16 }
        ReplaceGroup { key: 1203124021, line: 17 }
}
