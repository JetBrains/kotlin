#docker build --progress=plain -f compiler/daemon/remote-daemon/Dockerfile2 -t kotlin-remote-daemon-workaround .
FROM --platform=linux/amd64 eclipse-temurin:21-jdk

COPY compiler/daemon/remote-daemon/build/install/kotlin-remote-daemon /kotlin/compiler/daemon/remote-daemon/build/install/kotlin-remote-daemon
COPY compiler/daemon/remote-daemon/src/main/kotlin/server/auth/auth.json /kotlin/compiler/daemon/remote-daemon/src/main/kotlin/server/auth/auth.json
COPY compiler/daemon/remote-daemon/src/main/kotlin/server/auth/uuid.json /kotlin/compiler/daemon/remote-daemon/src/main/kotlin/server/auth/uuid.json
WORKDIR /kotlin/compiler/daemon/remote-daemon
EXPOSE 8000
ENTRYPOINT ["/kotlin/compiler/daemon/remote-daemon/build/install/kotlin-remote-daemon/bin/kotlin-remote-daemon"]
CMD []

# docker build --progress=plain -f compiler/daemon/remote-daemon/Dockerfile2 -t kotlin-remote-daemon-workaround .