/*
 * Copyright 2010-2020 JetBrains s.r.o. and Kotlin Programming Language contributors.
 * Use of this source code is governed by the Apache 2.0 license that can be found in the license/LICENSE.txt file.
 */

package test.collections

//
// NOTE: THIS FILE IS AUTO-GENERATED by the GenerateStandardLibTests.kt
// See: https://github.com/JetBrains/kotlin/tree/master/libraries/stdlib
//

import kotlin.random.*
import test.assertArrayContentEquals
import kotlin.test.*

class _UArraysTest {
    @Test
    fun foldIndexed_UIntArray() {
        expect(8u) { uintArrayOf(1u, 2u, 3u).foldIndexed(0u) { i, acc, e -> acc + i.toUInt() * e } }
        expect(10) { uintArrayOf(1u, 2u, 3u).foldIndexed(1) { i, acc, e -> acc + i + e.toInt() } }
        expect(15u) { uintArrayOf(1u, 2u, 3u).foldIndexed(1u) { i, acc, e -> acc * (i.toUInt() + e) } }
        expect(" 0-1 1-2 2-3") { uintArrayOf(1u, 2u, 3u).foldIndexed("") { i, acc, e -> "$acc $i-$e" } }
        expect(42u) {
            val numbers = uintArrayOf(1u, 2u, 3u, 4u)
            numbers.foldIndexed(0u) { index, a, b -> index.toUInt() * (a + b) }
        }
        expect(0u) {
            val numbers = uintArrayOf()
            numbers.foldIndexed(0u) { index, a, b -> index.toUInt() * (a + b) }
        }
        expect("11234") {
            val numbers = uintArrayOf(1u, 2u, 3u, 4u)
            numbers.map { it.toString() }.foldIndexed("") { index, a, b -> if (index == 0) a + b + b else a + b }
        }
    }

    @Test
    fun foldIndexed_ULongArray() {
        expect(8uL) { ulongArrayOf(1uL, 2uL, 3uL).foldIndexed(0uL) { i, acc, e -> acc + i.toULong() * e } }
        expect(10) { ulongArrayOf(1uL, 2uL, 3uL).foldIndexed(1) { i, acc, e -> acc + i + e.toInt() } }
        expect(15uL) { ulongArrayOf(1uL, 2uL, 3uL).foldIndexed(1uL) { i, acc, e -> acc * (i.toULong() + e) } }
        expect(" 0-1 1-2 2-3") { ulongArrayOf(1uL, 2uL, 3uL).foldIndexed("") { i, acc, e -> "$acc $i-$e" } }
        expect(42uL) {
            val numbers = ulongArrayOf(1uL, 2uL, 3uL, 4uL)
            numbers.foldIndexed(0uL) { index, a, b -> index.toULong() * (a + b) }
        }
        expect(0uL) {
            val numbers = ulongArrayOf()
            numbers.foldIndexed(0uL) { index, a, b -> index.toULong() * (a + b) }
        }
        expect("11234") {
            val numbers = ulongArrayOf(1uL, 2uL, 3uL, 4uL)
            numbers.map { it.toString() }.foldIndexed("") { index, a, b -> if (index == 0) a + b + b else a + b }
        }
    }

    @Test
    fun foldIndexed_UByteArray() {
        expect(8u) { ubyteArrayOf(1u, 2u, 3u).foldIndexed(0u) { i, acc, e -> acc + i.toUByte() * e } }
        expect(10) { ubyteArrayOf(1u, 2u, 3u).foldIndexed(1) { i, acc, e -> acc + i + e.toInt() } }
        expect(15u) { ubyteArrayOf(1u, 2u, 3u).foldIndexed(1u) { i, acc, e -> acc * (i.toUByte() + e) } }
        expect(" 0-1 1-2 2-3") { ubyteArrayOf(1u, 2u, 3u).foldIndexed("") { i, acc, e -> "$acc $i-$e" } }
        expect(42u) {
            val numbers = ubyteArrayOf(1u, 2u, 3u, 4u)
            numbers.foldIndexed(0u) { index, a, b -> index.toUByte() * (a + b) }
        }
        expect(0u) {
            val numbers = ubyteArrayOf()
            numbers.foldIndexed(0u) { index, a, b -> index.toUByte() * (a + b) }
        }
        expect("11234") {
            val numbers = ubyteArrayOf(1u, 2u, 3u, 4u)
            numbers.map { it.toString() }.foldIndexed("") { index, a, b -> if (index == 0) a + b + b else a + b }
        }
    }

    @Test
    fun foldIndexed_UShortArray() {
        expect(8u) { ushortArrayOf(1u, 2u, 3u).foldIndexed(0u) { i, acc, e -> acc + i.toUShort() * e } }
        expect(10) { ushortArrayOf(1u, 2u, 3u).foldIndexed(1) { i, acc, e -> acc + i + e.toInt() } }
        expect(15u) { ushortArrayOf(1u, 2u, 3u).foldIndexed(1u) { i, acc, e -> acc * (i.toUShort() + e) } }
        expect(" 0-1 1-2 2-3") { ushortArrayOf(1u, 2u, 3u).foldIndexed("") { i, acc, e -> "$acc $i-$e" } }
        expect(42u) {
            val numbers = ushortArrayOf(1u, 2u, 3u, 4u)
            numbers.foldIndexed(0u) { index, a, b -> index.toUShort() * (a + b) }
        }
        expect(0u) {
            val numbers = ushortArrayOf()
            numbers.foldIndexed(0u) { index, a, b -> index.toUShort() * (a + b) }
        }
        expect("11234") {
            val numbers = ushortArrayOf(1u, 2u, 3u, 4u)
            numbers.map { it.toString() }.foldIndexed("") { index, a, b -> if (index == 0) a + b + b else a + b }
        }
    }

    @Test
    fun foldRightIndexed_UIntArray() {
        expect(8u) { uintArrayOf(1u, 2u, 3u).foldRightIndexed(0u) { i, e, acc -> acc + i.toUInt() * e } }
        expect(10) { uintArrayOf(1u, 2u, 3u).foldRightIndexed(1) { i, e, acc -> acc + i + e.toInt() } }
        expect(15u) { uintArrayOf(1u, 2u, 3u).foldRightIndexed(1u) { i, e, acc -> acc * (i.toUInt() + e) } }
        expect(" 2-3 1-2 0-1") { uintArrayOf(1u, 2u, 3u).foldRightIndexed("") { i, e, acc -> "$acc $i-$e" } }
        expect("12343210") {
            val numbers = uintArrayOf(1u, 2u, 3u, 4u)
            numbers.map { it.toString() }.foldRightIndexed("") { index, a, b -> a + b + index }
        }
    }

    @Test
    fun foldRightIndexed_ULongArray() {
        expect(8uL) { ulongArrayOf(1uL, 2uL, 3uL).foldRightIndexed(0uL) { i, e, acc -> acc + i.toULong() * e } }
        expect(10) { ulongArrayOf(1uL, 2uL, 3uL).foldRightIndexed(1) { i, e, acc -> acc + i + e.toInt() } }
        expect(15uL) { ulongArrayOf(1uL, 2uL, 3uL).foldRightIndexed(1uL) { i, e, acc -> acc * (i.toULong() + e) } }
        expect(" 2-3 1-2 0-1") { ulongArrayOf(1uL, 2uL, 3uL).foldRightIndexed("") { i, e, acc -> "$acc $i-$e" } }
        expect("12343210") {
            val numbers = ulongArrayOf(1uL, 2uL, 3uL, 4uL)
            numbers.map { it.toString() }.foldRightIndexed("") { index, a, b -> a + b + index }
        }
    }

    @Test
    fun foldRightIndexed_UByteArray() {
        expect(8u) { ubyteArrayOf(1u, 2u, 3u).foldRightIndexed(0u) { i, e, acc -> acc + i.toUByte() * e } }
        expect(10) { ubyteArrayOf(1u, 2u, 3u).foldRightIndexed(1) { i, e, acc -> acc + i + e.toInt() } }
        expect(15u) { ubyteArrayOf(1u, 2u, 3u).foldRightIndexed(1u) { i, e, acc -> acc * (i.toUByte() + e) } }
        expect(" 2-3 1-2 0-1") { ubyteArrayOf(1u, 2u, 3u).foldRightIndexed("") { i, e, acc -> "$acc $i-$e" } }
        expect("12343210") {
            val numbers = ubyteArrayOf(1u, 2u, 3u, 4u)
            numbers.map { it.toString() }.foldRightIndexed("") { index, a, b -> a + b + index }
        }
    }

    @Test
    fun foldRightIndexed_UShortArray() {
        expect(8u) { ushortArrayOf(1u, 2u, 3u).foldRightIndexed(0u) { i, e, acc -> acc + i.toUShort() * e } }
        expect(10) { ushortArrayOf(1u, 2u, 3u).foldRightIndexed(1) { i, e, acc -> acc + i + e.toInt() } }
        expect(15u) { ushortArrayOf(1u, 2u, 3u).foldRightIndexed(1u) { i, e, acc -> acc * (i.toUShort() + e) } }
        expect(" 2-3 1-2 0-1") { ushortArrayOf(1u, 2u, 3u).foldRightIndexed("") { i, e, acc -> "$acc $i-$e" } }
        expect("12343210") {
            val numbers = ushortArrayOf(1u, 2u, 3u, 4u)
            numbers.map { it.toString() }.foldRightIndexed("") { index, a, b -> a + b + index }
        }
    }

    @Test
    fun maxByOrNull_UIntArray() {
        assertEquals(null, uintArrayOf().maxByOrNull { it })
        assertEquals(1u, uintArrayOf(1u).maxByOrNull { it })
        assertEquals(3u, uintArrayOf(3u, 2u).maxByOrNull { it * it })
        assertEquals(3u, uintArrayOf(3u, 2u).maxByOrNull { "a" })
        assertEquals(3u, uintArrayOf(3u, 2u).maxByOrNull { it.toString() })
    }

    @Test
    fun maxByOrNull_ULongArray() {
        assertEquals(null, ulongArrayOf().maxByOrNull { it })
        assertEquals(1uL, ulongArrayOf(1uL).maxByOrNull { it })
        assertEquals(3uL, ulongArrayOf(3uL, 2uL).maxByOrNull { it * it })
        assertEquals(3uL, ulongArrayOf(3uL, 2uL).maxByOrNull { "a" })
        assertEquals(3uL, ulongArrayOf(3uL, 2uL).maxByOrNull { it.toString() })
    }

    @Test
    fun maxByOrNull_UByteArray() {
        assertEquals(null, ubyteArrayOf().maxByOrNull { it })
        assertEquals(1u, ubyteArrayOf(1u).maxByOrNull { it })
        assertEquals(3u, ubyteArrayOf(3u, 2u).maxByOrNull { it * it })
        assertEquals(3u, ubyteArrayOf(3u, 2u).maxByOrNull { "a" })
        assertEquals(3u, ubyteArrayOf(3u, 2u).maxByOrNull { it.toString() })
    }

    @Test
    fun maxByOrNull_UShortArray() {
        assertEquals(null, ushortArrayOf().maxByOrNull { it })
        assertEquals(1u, ushortArrayOf(1u).maxByOrNull { it })
        assertEquals(3u, ushortArrayOf(3u, 2u).maxByOrNull { it * it })
        assertEquals(3u, ushortArrayOf(3u, 2u).maxByOrNull { "a" })
        assertEquals(3u, ushortArrayOf(3u, 2u).maxByOrNull { it.toString() })
    }

    @Test
    fun maxWithOrNull_UIntArray() {
        assertEquals(null, uintArrayOf().maxWithOrNull(naturalOrder()))
        assertEquals(1u, uintArrayOf(1u).maxWithOrNull(naturalOrder()))
        assertEquals(3u, uintArrayOf(2u, 3u, 4u).maxWithOrNull(compareBy { it % 4u }))
    }

    @Test
    fun maxWithOrNull_ULongArray() {
        assertEquals(null, ulongArrayOf().maxWithOrNull(naturalOrder()))
        assertEquals(1uL, ulongArrayOf(1uL).maxWithOrNull(naturalOrder()))
        assertEquals(3uL, ulongArrayOf(2uL, 3uL, 4uL).maxWithOrNull(compareBy { it % 4uL }))
    }

    @Test
    fun maxWithOrNull_UByteArray() {
        assertEquals(null, ubyteArrayOf().maxWithOrNull(naturalOrder()))
        assertEquals(1u, ubyteArrayOf(1u).maxWithOrNull(naturalOrder()))
        assertEquals(3u, ubyteArrayOf(2u, 3u, 4u).maxWithOrNull(compareBy { it % 4u }))
    }

    @Test
    fun maxWithOrNull_UShortArray() {
        assertEquals(null, ushortArrayOf().maxWithOrNull(naturalOrder()))
        assertEquals(1u, ushortArrayOf(1u).maxWithOrNull(naturalOrder()))
        assertEquals(3u, ushortArrayOf(2u, 3u, 4u).maxWithOrNull(compareBy { it % 4u }))
    }

    @Test
    fun minByOrNull_UIntArray() {
        assertEquals(null, uintArrayOf().minByOrNull { it })
        assertEquals(1u, uintArrayOf(1u).minByOrNull { it })
        assertEquals(2u, uintArrayOf(3u, 2u).minByOrNull { it * it })
        assertEquals(3u, uintArrayOf(3u, 2u).minByOrNull { "a" })
        assertEquals(2u, uintArrayOf(3u, 2u).minByOrNull { it.toString() })
    }

    @Test
    fun minByOrNull_ULongArray() {
        assertEquals(null, ulongArrayOf().minByOrNull { it })
        assertEquals(1uL, ulongArrayOf(1uL).minByOrNull { it })
        assertEquals(2uL, ulongArrayOf(3uL, 2uL).minByOrNull { it * it })
        assertEquals(3uL, ulongArrayOf(3uL, 2uL).minByOrNull { "a" })
        assertEquals(2uL, ulongArrayOf(3uL, 2uL).minByOrNull { it.toString() })
    }

    @Test
    fun minByOrNull_UByteArray() {
        assertEquals(null, ubyteArrayOf().minByOrNull { it })
        assertEquals(1u, ubyteArrayOf(1u).minByOrNull { it })
        assertEquals(2u, ubyteArrayOf(3u, 2u).minByOrNull { it * it })
        assertEquals(3u, ubyteArrayOf(3u, 2u).minByOrNull { "a" })
        assertEquals(2u, ubyteArrayOf(3u, 2u).minByOrNull { it.toString() })
    }

    @Test
    fun minByOrNull_UShortArray() {
        assertEquals(null, ushortArrayOf().minByOrNull { it })
        assertEquals(1u, ushortArrayOf(1u).minByOrNull { it })
        assertEquals(2u, ushortArrayOf(3u, 2u).minByOrNull { it * it })
        assertEquals(3u, ushortArrayOf(3u, 2u).minByOrNull { "a" })
        assertEquals(2u, ushortArrayOf(3u, 2u).minByOrNull { it.toString() })
    }

    @Test
    fun minWithOrNull_UIntArray() {
        assertEquals(null, uintArrayOf().minWithOrNull(naturalOrder()))
        assertEquals(1u, uintArrayOf(1u).minWithOrNull(naturalOrder()))
        assertEquals(4u, uintArrayOf(2u, 3u, 4u).minWithOrNull(compareBy { it % 4u }))
    }

    @Test
    fun minWithOrNull_ULongArray() {
        assertEquals(null, ulongArrayOf().minWithOrNull(naturalOrder()))
        assertEquals(1uL, ulongArrayOf(1uL).minWithOrNull(naturalOrder()))
        assertEquals(4uL, ulongArrayOf(2uL, 3uL, 4uL).minWithOrNull(compareBy { it % 4uL }))
    }

    @Test
    fun minWithOrNull_UByteArray() {
        assertEquals(null, ubyteArrayOf().minWithOrNull(naturalOrder()))
        assertEquals(1u, ubyteArrayOf(1u).minWithOrNull(naturalOrder()))
        assertEquals(4u, ubyteArrayOf(2u, 3u, 4u).minWithOrNull(compareBy { it % 4u }))
    }

    @Test
    fun minWithOrNull_UShortArray() {
        assertEquals(null, ushortArrayOf().minWithOrNull(naturalOrder()))
        assertEquals(1u, ushortArrayOf(1u).minWithOrNull(naturalOrder()))
        assertEquals(4u, ushortArrayOf(2u, 3u, 4u).minWithOrNull(compareBy { it % 4u }))
    }

    @Test
    fun indexOf_UIntArray() {
        expect(-1) { uintArrayOf(1u, 2u, 3u).indexOf(0u) }
        expect(0) { uintArrayOf(1u, 2u, 3u).indexOf(1u) }
        expect(1) { uintArrayOf(1u, 2u, 3u).indexOf(2u) }
        expect(2) { uintArrayOf(1u, 2u, 3u).indexOf(3u) } 
    }

    @Test
    fun indexOf_ULongArray() {
        expect(-1) { ulongArrayOf(1uL, 2uL, 3uL).indexOf(0uL) }
        expect(0) { ulongArrayOf(1uL, 2uL, 3uL).indexOf(1uL) }
        expect(1) { ulongArrayOf(1uL, 2uL, 3uL).indexOf(2uL) }
        expect(2) { ulongArrayOf(1uL, 2uL, 3uL).indexOf(3uL) } 
    }

    @Test
    fun indexOf_UByteArray() {
        expect(-1) { ubyteArrayOf(1u, 2u, 3u).indexOf(0u) }
        expect(0) { ubyteArrayOf(1u, 2u, 3u).indexOf(1u) }
        expect(1) { ubyteArrayOf(1u, 2u, 3u).indexOf(2u) }
        expect(2) { ubyteArrayOf(1u, 2u, 3u).indexOf(3u) } 
    }

    @Test
    fun indexOf_UShortArray() {
        expect(-1) { ushortArrayOf(1u, 2u, 3u).indexOf(0u) }
        expect(0) { ushortArrayOf(1u, 2u, 3u).indexOf(1u) }
        expect(1) { ushortArrayOf(1u, 2u, 3u).indexOf(2u) }
        expect(2) { ushortArrayOf(1u, 2u, 3u).indexOf(3u) } 
    }

    @Test
    fun indexOfFirst_UIntArray() {
        expect(-1) { uintArrayOf(1u, 2u, 3u).indexOfFirst { it == 0u } }
        expect(0) { uintArrayOf(1u, 2u, 3u).indexOfFirst { it % 2u == 1u } }
        expect(1) { uintArrayOf(1u, 2u, 3u).indexOfFirst { it % 2u == 0u } }
        expect(2) { uintArrayOf(1u, 2u, 3u).indexOfFirst { it == 3u } }
    }

    @Test
    fun indexOfFirst_ULongArray() {
        expect(-1) { ulongArrayOf(1uL, 2uL, 3uL).indexOfFirst { it == 0uL } }
        expect(0) { ulongArrayOf(1uL, 2uL, 3uL).indexOfFirst { it % 2uL == 1uL } }
        expect(1) { ulongArrayOf(1uL, 2uL, 3uL).indexOfFirst { it % 2uL == 0uL } }
        expect(2) { ulongArrayOf(1uL, 2uL, 3uL).indexOfFirst { it == 3uL } }
    }

    @Test
    fun indexOfFirst_UByteArray() {
        expect(-1) { ubyteArrayOf(1u, 2u, 3u).indexOfFirst { it == 0.toUByte() } }
        expect(0) { ubyteArrayOf(1u, 2u, 3u).indexOfFirst { it % 2u == 1u } }
        expect(1) { ubyteArrayOf(1u, 2u, 3u).indexOfFirst { it % 2u == 0u } }
        expect(2) { ubyteArrayOf(1u, 2u, 3u).indexOfFirst { it == 3.toUByte() } }
    }

    @Test
    fun indexOfFirst_UShortArray() {
        expect(-1) { ushortArrayOf(1u, 2u, 3u).indexOfFirst { it == 0.toUShort() } }
        expect(0) { ushortArrayOf(1u, 2u, 3u).indexOfFirst { it % 2u == 1u } }
        expect(1) { ushortArrayOf(1u, 2u, 3u).indexOfFirst { it % 2u == 0u } }
        expect(2) { ushortArrayOf(1u, 2u, 3u).indexOfFirst { it == 3.toUShort() } }
    }

    @Test
    fun copyInto_UIntArray() {
        val dest = uintArrayOf(1u, 2u, 3u)
        val newValues = uintArrayOf(4u, 5u, 6u)
        newValues.copyInto(dest, 0, 1, 3)
        val result1 = uintArrayOf(5u, 6u, 3u)
        assertTrue(result1 contentEquals dest, "Copying from newValues: ${result1.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 0, 1, 3)
        val result2 = uintArrayOf(6u, 3u, 3u)
        assertTrue(result2 contentEquals dest, "Overlapping backward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 1, 0, 2)
        val result3 = uintArrayOf(6u, 6u, 3u)
        assertTrue(result3 contentEquals dest, "Overlapping forward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        for ((start, end) in listOf(-1 to 0, 0 to 4, 4 to 4, 1 to 0, 0 to -1)) {
            val bounds = "start: $start, end: $end"
            val ex = assertFails(bounds) { newValues.copyInto(dest, 0, start, end) }
            assertTrue(ex is IllegalArgumentException || ex is IndexOutOfBoundsException, "Unexpected exception type: $ex")
        }
        for (destIndex in listOf(-1, 2, 4)) {
            assertFailsWith<IndexOutOfBoundsException>("index: $destIndex") { newValues.copyInto(dest, destIndex, 0, 2) }
        } 
    }

    @Test
    fun copyInto_ULongArray() {
        val dest = ulongArrayOf(1uL, 2uL, 3uL)
        val newValues = ulongArrayOf(4uL, 5uL, 6uL)
        newValues.copyInto(dest, 0, 1, 3)
        val result1 = ulongArrayOf(5uL, 6uL, 3uL)
        assertTrue(result1 contentEquals dest, "Copying from newValues: ${result1.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 0, 1, 3)
        val result2 = ulongArrayOf(6uL, 3uL, 3uL)
        assertTrue(result2 contentEquals dest, "Overlapping backward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 1, 0, 2)
        val result3 = ulongArrayOf(6uL, 6uL, 3uL)
        assertTrue(result3 contentEquals dest, "Overlapping forward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        for ((start, end) in listOf(-1 to 0, 0 to 4, 4 to 4, 1 to 0, 0 to -1)) {
            val bounds = "start: $start, end: $end"
            val ex = assertFails(bounds) { newValues.copyInto(dest, 0, start, end) }
            assertTrue(ex is IllegalArgumentException || ex is IndexOutOfBoundsException, "Unexpected exception type: $ex")
        }
        for (destIndex in listOf(-1, 2, 4)) {
            assertFailsWith<IndexOutOfBoundsException>("index: $destIndex") { newValues.copyInto(dest, destIndex, 0, 2) }
        } 
    }

    @Test
    fun copyInto_UByteArray() {
        val dest = ubyteArrayOf(1u, 2u, 3u)
        val newValues = ubyteArrayOf(4u, 5u, 6u)
        newValues.copyInto(dest, 0, 1, 3)
        val result1 = ubyteArrayOf(5u, 6u, 3u)
        assertTrue(result1 contentEquals dest, "Copying from newValues: ${result1.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 0, 1, 3)
        val result2 = ubyteArrayOf(6u, 3u, 3u)
        assertTrue(result2 contentEquals dest, "Overlapping backward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 1, 0, 2)
        val result3 = ubyteArrayOf(6u, 6u, 3u)
        assertTrue(result3 contentEquals dest, "Overlapping forward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        for ((start, end) in listOf(-1 to 0, 0 to 4, 4 to 4, 1 to 0, 0 to -1)) {
            val bounds = "start: $start, end: $end"
            val ex = assertFails(bounds) { newValues.copyInto(dest, 0, start, end) }
            assertTrue(ex is IllegalArgumentException || ex is IndexOutOfBoundsException, "Unexpected exception type: $ex")
        }
        for (destIndex in listOf(-1, 2, 4)) {
            assertFailsWith<IndexOutOfBoundsException>("index: $destIndex") { newValues.copyInto(dest, destIndex, 0, 2) }
        } 
    }

    @Test
    fun copyInto_UShortArray() {
        val dest = ushortArrayOf(1u, 2u, 3u)
        val newValues = ushortArrayOf(4u, 5u, 6u)
        newValues.copyInto(dest, 0, 1, 3)
        val result1 = ushortArrayOf(5u, 6u, 3u)
        assertTrue(result1 contentEquals dest, "Copying from newValues: ${result1.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 0, 1, 3)
        val result2 = ushortArrayOf(6u, 3u, 3u)
        assertTrue(result2 contentEquals dest, "Overlapping backward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        dest.copyInto(dest, 1, 0, 2)
        val result3 = ushortArrayOf(6u, 6u, 3u)
        assertTrue(result3 contentEquals dest, "Overlapping forward copy: ${result2.contentToString()}, ${dest.contentToString()}")
        for ((start, end) in listOf(-1 to 0, 0 to 4, 4 to 4, 1 to 0, 0 to -1)) {
            val bounds = "start: $start, end: $end"
            val ex = assertFails(bounds) { newValues.copyInto(dest, 0, start, end) }
            assertTrue(ex is IllegalArgumentException || ex is IndexOutOfBoundsException, "Unexpected exception type: $ex")
        }
        for (destIndex in listOf(-1, 2, 4)) {
            assertFailsWith<IndexOutOfBoundsException>("index: $destIndex") { newValues.copyInto(dest, destIndex, 0, 2) }
        } 
    }

    @Test
    fun reverse_UIntArray() {
        val arrays = (0..4).map { n -> (1..n).map { it.toUInt() }.toUIntArray() }
        for (array in arrays) {
            val original = array.toList()
            array.reverse()
            val reversed = array.toList()
            assertEquals(original.asReversed(), reversed)
        }
    }

    @Test
    fun reverse_ULongArray() {
        val arrays = (0..4).map { n -> (1..n).map { it.toULong() }.toULongArray() }
        for (array in arrays) {
            val original = array.toList()
            array.reverse()
            val reversed = array.toList()
            assertEquals(original.asReversed(), reversed)
        }
    }

    @Test
    fun reverse_UByteArray() {
        val arrays = (0..4).map { n -> (1..n).map { it.toUByte() }.toUByteArray() }
        for (array in arrays) {
            val original = array.toList()
            array.reverse()
            val reversed = array.toList()
            assertEquals(original.asReversed(), reversed)
        }
    }

    @Test
    fun reverse_UShortArray() {
        val arrays = (0..4).map { n -> (1..n).map { it.toUShort() }.toUShortArray() }
        for (array in arrays) {
            val original = array.toList()
            array.reverse()
            val reversed = array.toList()
            assertEquals(original.asReversed(), reversed)
        }
    }

    @Test
    fun reverseRange_UIntArray() {
        val arrays = (0..7).map { n -> n to (0 until n).map { it.toUInt() }.toUIntArray() }
        for ((size, array) in arrays) {
            for (fromIndex in 0 until size) {
                for (toIndex in fromIndex..size) {
                    val original = array.toMutableList()
                    array.reverse(fromIndex, toIndex)
                    val reversed = array.toMutableList()
                    assertEquals(original.apply { subList(fromIndex, toIndex).reverse() }, reversed)
                }
            }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(-1, size) }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(0, size + 1) }
            assertFailsWith<IllegalArgumentException> { array.reverse(0, -1) }
        }
    }

    @Test
    fun reverseRange_ULongArray() {
        val arrays = (0..7).map { n -> n to (0 until n).map { it.toULong() }.toULongArray() }
        for ((size, array) in arrays) {
            for (fromIndex in 0 until size) {
                for (toIndex in fromIndex..size) {
                    val original = array.toMutableList()
                    array.reverse(fromIndex, toIndex)
                    val reversed = array.toMutableList()
                    assertEquals(original.apply { subList(fromIndex, toIndex).reverse() }, reversed)
                }
            }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(-1, size) }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(0, size + 1) }
            assertFailsWith<IllegalArgumentException> { array.reverse(0, -1) }
        }
    }

    @Test
    fun reverseRange_UByteArray() {
        val arrays = (0..7).map { n -> n to (0 until n).map { it.toUByte() }.toUByteArray() }
        for ((size, array) in arrays) {
            for (fromIndex in 0 until size) {
                for (toIndex in fromIndex..size) {
                    val original = array.toMutableList()
                    array.reverse(fromIndex, toIndex)
                    val reversed = array.toMutableList()
                    assertEquals(original.apply { subList(fromIndex, toIndex).reverse() }, reversed)
                }
            }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(-1, size) }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(0, size + 1) }
            assertFailsWith<IllegalArgumentException> { array.reverse(0, -1) }
        }
    }

    @Test
    fun reverseRange_UShortArray() {
        val arrays = (0..7).map { n -> n to (0 until n).map { it.toUShort() }.toUShortArray() }
        for ((size, array) in arrays) {
            for (fromIndex in 0 until size) {
                for (toIndex in fromIndex..size) {
                    val original = array.toMutableList()
                    array.reverse(fromIndex, toIndex)
                    val reversed = array.toMutableList()
                    assertEquals(original.apply { subList(fromIndex, toIndex).reverse() }, reversed)
                }
            }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(-1, size) }
            assertFailsWith<IndexOutOfBoundsException> { array.reverse(0, size + 1) }
            assertFailsWith<IllegalArgumentException> { array.reverse(0, -1) }
        }
    }

    @Test
    fun reversed_UIntArray() {
        assertEquals(listOf<UInt>(3u, 2u, 1u), uintArrayOf(1u, 2u, 3u).reversed())
    }

    @Test
    fun reversed_ULongArray() {
        assertEquals(listOf<ULong>(3uL, 2uL, 1uL), ulongArrayOf(1uL, 2uL, 3uL).reversed())
    }

    @Test
    fun reversed_UByteArray() {
        assertEquals(listOf<UByte>(3u, 2u, 1u), ubyteArrayOf(1u, 2u, 3u).reversed())
    }

    @Test
    fun reversed_UShortArray() {
        assertEquals(listOf<UShort>(3u, 2u, 1u), ushortArrayOf(1u, 2u, 3u).reversed())
    }

    @Test
    fun reversedArray_UIntArray() {
        assertArrayContentEquals(uintArrayOf(3u, 2u, 1u), uintArrayOf(1u, 2u, 3u).reversedArray())
    }

    @Test
    fun reversedArray_ULongArray() {
        assertArrayContentEquals(ulongArrayOf(3uL, 2uL, 1uL), ulongArrayOf(1uL, 2uL, 3uL).reversedArray())
    }

    @Test
    fun reversedArray_UByteArray() {
        assertArrayContentEquals(ubyteArrayOf(3u, 2u, 1u), ubyteArrayOf(1u, 2u, 3u).reversedArray())
    }

    @Test
    fun reversedArray_UShortArray() {
        assertArrayContentEquals(ushortArrayOf(3u, 2u, 1u), ushortArrayOf(1u, 2u, 3u).reversedArray())
    }

    @Test
    fun shuffle_UIntArray() {
        fun test(data: UIntArray) {
            val original = data.toMutableList()
            data.shuffle()
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(original.groupBy { it }, shuffled.groupBy { it })
        }
        test(UIntArray(100) { it.toUInt() })
    }

    @Test
    fun shuffle_ULongArray() {
        fun test(data: ULongArray) {
            val original = data.toMutableList()
            data.shuffle()
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(original.groupBy { it }, shuffled.groupBy { it })
        }
        test(ULongArray(100) { it.toULong() })
    }

    @Test
    fun shuffle_UByteArray() {
        fun test(data: UByteArray) {
            val original = data.toMutableList()
            data.shuffle()
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(original.groupBy { it }, shuffled.groupBy { it })
        }
        test(UByteArray(100) { it.toUByte() })
    }

    @Test
    fun shuffle_UShortArray() {
        fun test(data: UShortArray) {
            val original = data.toMutableList()
            data.shuffle()
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(original.groupBy { it }, shuffled.groupBy { it })
        }
        test(UShortArray(100) { it.toUShort() })
    }

    @Test
    fun shuffleRandom_UIntArray() {
        fun test(data: UIntArray) {
            val seed = Random.nextInt()
            val original = data.toMutableList()
            val originalShuffled = original.shuffled(Random(seed))
            data.shuffle(Random(seed))
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(originalShuffled, shuffled)
        }
        test(UIntArray(16) { it.toUInt() })
    }

    @Test
    fun shuffleRandom_ULongArray() {
        fun test(data: ULongArray) {
            val seed = Random.nextInt()
            val original = data.toMutableList()
            val originalShuffled = original.shuffled(Random(seed))
            data.shuffle(Random(seed))
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(originalShuffled, shuffled)
        }
        test(ULongArray(16) { it.toULong() })
    }

    @Test
    fun shuffleRandom_UByteArray() {
        fun test(data: UByteArray) {
            val seed = Random.nextInt()
            val original = data.toMutableList()
            val originalShuffled = original.shuffled(Random(seed))
            data.shuffle(Random(seed))
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(originalShuffled, shuffled)
        }
        test(UByteArray(16) { it.toUByte() })
    }

    @Test
    fun shuffleRandom_UShortArray() {
        fun test(data: UShortArray) {
            val seed = Random.nextInt()
            val original = data.toMutableList()
            val originalShuffled = original.shuffled(Random(seed))
            data.shuffle(Random(seed))
            val shuffled = data.toMutableList()
            assertNotEquals(original, shuffled)
            assertEquals(originalShuffled, shuffled)
        }
        test(UShortArray(16) { it.toUShort() })
    }

    @Test
    fun sort_UIntArray() {
        val data = uintArrayOf(5u, 2u, 1u, 9u, 80u, UInt.MIN_VALUE, UInt.MAX_VALUE)
        data.sort()
        assertArrayContentEquals(uintArrayOf(UInt.MIN_VALUE, 1u, 2u, 5u, 9u, 80u, UInt.MAX_VALUE), data)
    }

    @Test
    fun sort_ULongArray() {
        val data = ulongArrayOf(5uL, 2uL, 1uL, 9uL, 80uL, ULong.MIN_VALUE, ULong.MAX_VALUE)
        data.sort()
        assertArrayContentEquals(ulongArrayOf(ULong.MIN_VALUE, 1uL, 2uL, 5uL, 9uL, 80uL, ULong.MAX_VALUE), data)
    }

    @Test
    fun sort_UByteArray() {
        val data = ubyteArrayOf(5u, 2u, 1u, 9u, 80u, UByte.MIN_VALUE, UByte.MAX_VALUE)
        data.sort()
        assertArrayContentEquals(ubyteArrayOf(UByte.MIN_VALUE, 1u, 2u, 5u, 9u, 80u, UByte.MAX_VALUE), data)
    }

    @Test
    fun sort_UShortArray() {
        val data = ushortArrayOf(5u, 2u, 1u, 9u, 80u, UShort.MIN_VALUE, UShort.MAX_VALUE)
        data.sort()
        assertArrayContentEquals(ushortArrayOf(UShort.MIN_VALUE, 1u, 2u, 5u, 9u, 80u, UShort.MAX_VALUE), data)
    }

    @Test
    fun sortDescending_UIntArray() {
        val data = uintArrayOf(5u, 2u, 1u, 9u, 80u, UInt.MIN_VALUE, UInt.MAX_VALUE)
        data.sortDescending()
        assertArrayContentEquals(uintArrayOf(UInt.MIN_VALUE, 1u, 2u, 5u, 9u, 80u, UInt.MAX_VALUE).reversedArray(), data)
    }

    @Test
    fun sortDescending_ULongArray() {
        val data = ulongArrayOf(5uL, 2uL, 1uL, 9uL, 80uL, ULong.MIN_VALUE, ULong.MAX_VALUE)
        data.sortDescending()
        assertArrayContentEquals(ulongArrayOf(ULong.MIN_VALUE, 1uL, 2uL, 5uL, 9uL, 80uL, ULong.MAX_VALUE).reversedArray(), data)
    }

    @Test
    fun sortDescending_UByteArray() {
        val data = ubyteArrayOf(5u, 2u, 1u, 9u, 80u, UByte.MIN_VALUE, UByte.MAX_VALUE)
        data.sortDescending()
        assertArrayContentEquals(ubyteArrayOf(UByte.MIN_VALUE, 1u, 2u, 5u, 9u, 80u, UByte.MAX_VALUE).reversedArray(), data)
    }

    @Test
    fun sortDescending_UShortArray() {
        val data = ushortArrayOf(5u, 2u, 1u, 9u, 80u, UShort.MIN_VALUE, UShort.MAX_VALUE)
        data.sortDescending()
        assertArrayContentEquals(ushortArrayOf(UShort.MIN_VALUE, 1u, 2u, 5u, 9u, 80u, UShort.MAX_VALUE).reversedArray(), data)
    }

    @Test
    fun sorted_UIntArray() {
        uintArrayOf(3u, 7u, 1u).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        uintArrayOf(1u, UInt.MAX_VALUE, UInt.MIN_VALUE).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sorted_ULongArray() {
        ulongArrayOf(3uL, 7uL, 1uL).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        ulongArrayOf(1uL, ULong.MAX_VALUE, ULong.MIN_VALUE).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sorted_UByteArray() {
        ubyteArrayOf(3u, 7u, 1u).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        ubyteArrayOf(1u, UByte.MAX_VALUE, UByte.MIN_VALUE).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sorted_UShortArray() {
        ushortArrayOf(3u, 7u, 1u).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        ushortArrayOf(1u, UShort.MAX_VALUE, UShort.MIN_VALUE).sorted().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sortedArray_UIntArray() {
        uintArrayOf(3u, 7u, 1u).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        uintArrayOf(1u, UInt.MAX_VALUE, UInt.MIN_VALUE).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sortedArray_ULongArray() {
        ulongArrayOf(3uL, 7uL, 1uL).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        ulongArrayOf(1uL, ULong.MAX_VALUE, ULong.MIN_VALUE).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sortedArray_UByteArray() {
        ubyteArrayOf(3u, 7u, 1u).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        ubyteArrayOf(1u, UByte.MAX_VALUE, UByte.MIN_VALUE).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sortedArray_UShortArray() {
        ushortArrayOf(3u, 7u, 1u).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
        ushortArrayOf(1u, UShort.MAX_VALUE, UShort.MIN_VALUE).sortedArray().iterator().assertSorted { a, b -> a.compareTo(b) <= 0 }
    }

    @Test
    fun sortedArrayDescending_UIntArray() {
        uintArrayOf(3u, 7u, 1u).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        uintArrayOf(1u, UInt.MAX_VALUE, UInt.MIN_VALUE).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedArrayDescending_ULongArray() {
        ulongArrayOf(3uL, 7uL, 1uL).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        ulongArrayOf(1uL, ULong.MAX_VALUE, ULong.MIN_VALUE).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedArrayDescending_UByteArray() {
        ubyteArrayOf(3u, 7u, 1u).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        ubyteArrayOf(1u, UByte.MAX_VALUE, UByte.MIN_VALUE).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedArrayDescending_UShortArray() {
        ushortArrayOf(3u, 7u, 1u).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        ushortArrayOf(1u, UShort.MAX_VALUE, UShort.MIN_VALUE).sortedArrayDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedDescending_UIntArray() {
        uintArrayOf(3u, 7u, 1u).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        uintArrayOf(1u, UInt.MAX_VALUE, UInt.MIN_VALUE).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedDescending_ULongArray() {
        ulongArrayOf(3uL, 7uL, 1uL).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        ulongArrayOf(1uL, ULong.MAX_VALUE, ULong.MIN_VALUE).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedDescending_UByteArray() {
        ubyteArrayOf(3u, 7u, 1u).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        ubyteArrayOf(1u, UByte.MAX_VALUE, UByte.MIN_VALUE).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

    @Test
    fun sortedDescending_UShortArray() {
        ushortArrayOf(3u, 7u, 1u).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
        ushortArrayOf(1u, UShort.MAX_VALUE, UShort.MIN_VALUE).sortedDescending().iterator().assertSorted { a, b -> a.compareTo(b) >= 0 }
    }

}
