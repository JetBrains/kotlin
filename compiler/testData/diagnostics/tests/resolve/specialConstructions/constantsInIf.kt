// !WITH_NEW_INFERENCE
// !DIAGNOSTICS: -USELESS_ELVIS

fun test() {
    bar(<!NI;TYPE_MISMATCH!>if (true) {
        <!OI;CONSTANT_EXPECTED_TYPE_MISMATCH!>1<!>
    } else {
        <!OI;CONSTANT_EXPECTED_TYPE_MISMATCH!>2<!>
    }<!>)

    bar(<!NI;TYPE_MISMATCH, NI;TYPE_MISMATCH!><!OI;CONSTANT_EXPECTED_TYPE_MISMATCH!>1<!> ?: <!OI;CONSTANT_EXPECTED_TYPE_MISMATCH!>2<!><!>)
}

fun bar(s: String) = s