# Formal Verification for Kotlin

This plugin performs formal verification of Kotlin Contracts by translating them to Viper.

## Directory structure:

- `src/org/.../formver/plugin`: Infrastructure for integrating our code into the compiler
  and reporting warnings.
- `src/org/.../formver/conversion`: Conversion logic from Kotlin to Viper.
- `src/org/.../formver/scala`: Utilities for constructing Viper data structures, which are defined in Scala.
- `testData/diagnostics`: Test suite of example programs.  Only the `.kt` files are human-written:
  the rest is generated automatically when running the tests in `tests-gen`.
- `tests`: Harness for running our automated tests.  Manual tests should also be put here.
- `tests-gen`: Tests generated by `:generators:generateTests`.  Rerun that when you add files to `testData`.

## TODOs

- [ ] Support more FIR statements 
  + [ ] Support jumps
  + [ ] Support calling inline functions
- [ ] Support more types 
  + [ ] Nullability
  + [ ] Class types
- [ ] Support contracts
  + [ ] Support `returns`
  + [ ] Support `implies`
  + [ ] Support `callsInPlace`
- [ ] Add position/info/error transformation information 

Some general code cleanup tasks:
- [ ] Move all direct references to Viper/Scala to the `scala` subdirectory
- [ ] Remove the `Option` type; we use nullability instead