<idea-plugin xmlns:xi="http://www.w3.org/2001/XInclude">
    <xi:include href="android-lint.xml" xpointer="xpointer(/idea-plugin/*)"/>

    <extensions defaultExtensionNs="com.intellij">
        <gotoDeclarationHandler implementation="org.jetbrains.kotlin.android.navigation.KotlinAndroidGotoDeclarationHandler"/>

        <moduleService serviceInterface="org.jetbrains.kotlin.androidExtensions.res.AndroidLayoutXmlFileManager"
                       serviceImplementation="org.jetbrains.kotlin.androidExtensions.ide.res.IDEAndroidLayoutXmlFileManager"/>
        <psi.treeChangePreprocessor implementation="org.jetbrains.kotlin.androidExtensions.ide.AndroidPsiTreeChangePreprocessor"/>
        <errorHandler implementation="org.jetbrains.kotlin.androidExtensions.ide.AndroidExtensionsReportSubmitter"/>
        <gotoDeclarationHandler implementation="org.jetbrains.kotlin.androidExtensions.ide.AndroidGotoDeclarationHandler"/>

        <localInspection implementationClass="org.jetbrains.kotlin.android.inspection.IllegalIdentifierInspection"
                         displayName="Illegal Android Identifier"
                         groupName="Kotlin"
                         enabledByDefault="true"
                         level="ERROR"/>

        <editorNotificationProvider implementation="org.jetbrains.kotlin.android.actions.KotlinNewActivityNotification"/>

        <intentionAction>
            <className>org.jetbrains.kotlin.android.intentions.KotlinAndroidAddStringResource</className>
            <category>Kotlin Android</category>
        </intentionAction>


        <codeInsight.unresolvedReferenceQuickFixProvider
            implementation="org.jetbrains.kotlin.android.inspection.KotlinAndroidResourceQuickFixProvider"/>

    </extensions>

    <extensions defaultExtensionNs="org.jetbrains.kotlin">
        <expressionCodegenExtension implementation="org.jetbrains.kotlin.androidExtensions.codegen.AndroidExpressionCodegenExtension"/>
        <defaultErrorMessages implementation="org.jetbrains.kotlin.androidExtensions.diagnostic.DefaultErrorMessagesAndroid"/>
        <storageComponentContainerContributor implementation="org.jetbrains.kotlin.androidExtensions.AndroidExtensionPropertiesComponentContainerContributor"/>
        <classBuilderFactoryInterceptorExtension implementation="org.jetbrains.kotlin.androidExtensions.codegen.AndroidOnDestroyClassBuilderInterceptorExtension"/>
        <packageFragmentProviderExtension implementation="org.jetbrains.kotlin.androidExtensions.ide.res.IDEAndroidPackageFragmentProviderExtension"/>
        <simpleNameReferenceExtension implementation="org.jetbrains.kotlin.androidExtensions.ide.AndroidSimpleNameReferenceExtension"/>
        <kotlinIndicesHelperExtension implementation="org.jetbrains.kotlin.androidExtensions.ide.AndroidIndicesHelperExtension"/>

        <projectConfigurator implementation="org.jetbrains.kotlin.android.configure.KotlinAndroidGradleModuleConfigurator"/>
    </extensions>

    <project-components>
        <component>
            <interface-class>org.jetbrains.kotlin.android.facet.KotlinAndroidStartupManager</interface-class>
            <implementation-class>org.jetbrains.kotlin.android.facet.KotlinAndroidStartupManager</implementation-class>
        </component>
    </project-components>

    <actions>
        <action id="Kotlin.new.activity" class="org.jetbrains.kotlin.android.actions.NewKotlinActivityAction">
            <add-to-group group-id="NewGroup" anchor="after" relative-to-action="Kotlin.NewFile"/>
        </action>
    </actions>
</idea-plugin>
