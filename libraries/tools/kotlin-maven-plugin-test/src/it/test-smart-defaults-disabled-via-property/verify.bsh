import java.io.*;

source(new File(basedir, "verify-common.bsh").getAbsolutePath());

/**
 * Verify that smart defaults are NOT applied when disabled via property:
 * 1. extensions=true is set, but kotlin.smart.defaults.enabled=false
 * 2. "Kotlin smart defaults are enabled" message should NOT appear
 * 3. Project should still compile (with explicit configuration)
 */

// Check that smart defaults were NOT enabled (disabled via property)
assertBuildLogHasNoLineThatContains("Kotlin smart defaults are enabled");

// Check that kotlin-stdlib was NOT automatically added
assertBuildLogHasNoLineThatContains("Added kotlin-stdlib dependency");

// Check that classes were still produced (with explicit configuration)
assertFileExists("target/classes/test/MainKt.class");

print("Smart defaults disabled via property test passed!");
